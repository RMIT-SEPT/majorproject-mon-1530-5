version: '3.2'
services:
  ui:
    build: ./FrontEnd
    container_name: frontend
    ports:
       - 3000:3000
    environment:
      - CHOKIDAR_USEPOLLING=true
    stdin_open: true
    

  bookingapi:
   build: ./BackEnd
   container_name: bookingapi_springboot
   environment:
     SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/bookingapi_db?useLegacyDatetimeCode=false&serverTimezone=UTC
   ports:
     - 8080:8080
   depends_on: 
    - db

  db:
   build: ./BackEnd
   restart: always
   container_name: bookingapi_mysql
   image: mysql:latest
   ports:
     - 6033:3306
   volumes:
     - mysql-datavolume:/var/lib/mysql
   environment:
     - MYSQL_ROOT_PASSWORD=password
     - MYSQL_DATABASE=bookingapi_db
     
     

volumes:
 mysql-datavolume: